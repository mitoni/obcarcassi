---
import MainLayout from "../../layouts/MainLayout.astro";
import type { GetStaticPaths } from "astro";
import { getCollection, getEntry } from "astro:content"

export const getStaticPaths = (async () => {
const projects = await getCollection("projects");
    return projects.map(project => ({params: {projectSlug: project.slug}}));
}) satisfies GetStaticPaths;

const { projectSlug } = Astro.params

const project = await getEntry("projects", projectSlug);
const { Content } = await project.render();
---
<style is:global>
    .hero {
      width: 100%;
      height: 50vh;

      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;

      & h1 {
        font-family: melodrama;
        font-size: 3rem;
        font-weight: 300;
        color: rgb(var(--red));
      }

      & h2 {
        font-family: melodrama;
        font-size: 2rem;
        font-weight: 300;
        color: rgb(var(--red));
      }
    }

    p,
    li,
    ul {
      font-size: 1.125rem;
      line-height: 1.5;
    }

    p {
      margin-block-start: var(--spacing-xl);
      margin-block-end: var(--spacing-xl);
    }

    h1 + p,
    h2 + p,
    h3 + p,
    h4 + p,
    h5 + p,
    h6 + p {
      margin-block-start: inherit;
      margin-block-end: inherit;
    }

    img {
      max-width: 1024px;
      margin: var(--spacing-rg) 0;
    }

    p:has(img) {
      text-align: center;
    }

    .subtitle {
        color: rgba(var(--red), 0.8);
    }
</style>

<MainLayout>
    <section class="hero">
        <h1>{project.data.title}</h1>
        <h2>{project.data.description}</h2>
        <span class="subtitle">{project.data.type.toUpperCase()} \ {project.data.date.getFullYear()}</span>
    </section>

    <section>
        <Content />
    </section>
</MainLayout>
